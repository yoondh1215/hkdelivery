<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Insert title here</title>
</head>
<body>

구매목록<br/>

<table width="800" align="center">
	<tr><td>주문일(결제번호)</td>
		<td>상품명(이미지) / 주문번호</td>
		<td>주문상태</td>
	</tr>
	
	<tr th:each="orderListDTO : ${list}">
		<td>[[${#dates.format(orderListDTO.purchaseDTO.purchaseDate),'yyyy-MM-dd'}]] <!-- 주문일 -->
			<!-- (결제번호) --> <!-- 결제시간이 없다 = 아직 결제가 안됐다 -->
			(
			<th:block= th:if="${orderListDTO.paymentDTO.appletime == null}">
				결제 대기중
			</th:block>
			<!-- 결제대기시간이 있다 = 결제가 이뤄졌다 -->
			<th:block= th:if="${orderListDTO.paymentDTO.appletime != null}">
				<!-- 현금결제인 경우 승인번호가 없음 -->
				<th:block th:if="orderListDTO.paymentDTO.confirmnumber == null">
					현금결제
				</th:block>
				<th:block th:if="orderListDTO.paymentDTO.confirmnumber != null">
					[[${orderListDTO.paymentDTO.cofrimnumber}]] <!-- 승인번호 -->
				</th:block>
			</th:block>
			)</td>
		<td>
			<th:block th:each="dto : ${orderListDTO.purchaseListGoodsDTOs}">
				<img th:src="|/static/upload/${dto.goods.goodsMain}|" width="30"/>
				[[${dto.goods.goodsName}]] 
			</th:block>
			/ [[${orderListDTO.purchaseDTO.purchaseNum}]] </td>
			
		<td>
			<th:block th:if="${orderListDTO.paymentDTO.appltime != null}">
				<a th:Href="|paymentDel?purchaseNum=${orderListDTO.purchaseDTO.purchaseNum}|">결제취소</a>
			</th:block>
			<th:block th:if="${orderListDTO.paymentDTO.appltime == null}">
				<a th:hef="|paymentOk?purchaseNum=${orderListDTO.purchaseDTO.purchaseNum}|">결제하기</a>
			</th:block></td>
	</tr>

</table>

</body>
</html>